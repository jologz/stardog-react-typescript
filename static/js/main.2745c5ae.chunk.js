(this["webpackJsonpstardog-react-typescript"]=this["webpackJsonpstardog-react-typescript"]||[]).push([[0],{154:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),o=n(10),i=n.n(o),s=n(80),d=n(107),u=n(201),l=n(6),p=function(e){var t=e.children;return Object(l.jsx)(u.a,{maxWidth:"xl",children:Object(l.jsx)(l.Fragment,{children:t})})},j=function(e,t){return function(){return e(t.apply(void 0,arguments))}},b=function(e){return void 0===e?"":e},h=function(e){return function(t){return"string"===typeof t?e+t:t.map((function(t){return e+t}))}},O=n(8),f={googleApiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/stardog-react-typescript",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_API_KEY},m=n(108),x="PREFIX wd: <http://www.wikidata.org/entity/>\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\nPREFIX p: <http://www.wikidata.org/prop/>\nPREFIX ps: <http://www.wikidata.org/prop/statement/>\nPREFIX psv: <http://www.wikidata.org/prop/statement/value/>\nPREFIX wikibase: <http://wikiba.se/ontology#>\n\nSELECT ?countyName ?cases ?population ?percentCases ?lat ?lng\n{\n    # get the latest date\n    { SELECT (max(?d) as ?date) { ?r :date ?d } }\n\n    # get all the reports for the latest date\n    ?report\n        :cases ?cases  ;\n        :date ?date ;                \n        :county [\n            rdfs:label ?countyName ;\n            :fips ?fips\n        ]    \n\n    # Get coordinates of\n    SERVICE <https://query.wikidata.org/sparql> \n    {\n        SELECT * {\n            ?item wdt:P882 ?fips ;\n                  wdt:P1082 ?population ;\n                  p:P625 ?coordPoint .\n            ?coordPoint psv:P625 ?coord_node .\n            ?coord_node wikibase:geoLongitude ?lng ;\n                        wikibase:geoLatitude ?lat .\n        }\n    }   \n    # compute percentages\n    BIND(roundHalfToEven((?cases / ?population) * 100, 2) AS ?percentCases)\n}\nORDER BY desc(?percentCases)",g=n(81),v=n.n(g),w=n(103),y=n(72),C=Object(a.createContext)({connection:{},dbName:""}),E=function(e){var t=e.username,n=e.password,r=e.endpoint,a=e.dbName,c=e.children,o=new y.Connection({username:t,password:n,endpoint:r});return Object(l.jsx)(C.Provider,{value:{connection:o,dbName:a},children:c})},P=function(){var e=Object(a.useContext)(C),t=e.connection,n=e.dbName,r=Object(a.useState)(!1),c=Object(O.a)(r,2),o=c[0],i=c[1],s=Object(a.useState)(),d=Object(O.a)(s,2),u=d[0],l=d[1],p=Object(a.useState)(null),j=Object(O.a)(p,2),b=j[0],h=j[1];return[Object(a.useCallback)(function(){var e=Object(w.a)(v.a.mark((function e(r){var a,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.readQuery,i(!0),e.next=4,y.query.execute(t,n,a);case 4:if((c=e.sent).ok){e.next=9;break}return l({status:c.status,statusText:c.statusText}),i(!1),e.abrupt("return");case 9:o=c.body.results.bindings,h(o),i(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,n]),{error:u,loading:o,data:b}]},S=function(){var e,t=P(),n=Object(O.a)(t,2),r=n[0],c=n[1],o=c.loading,i=c.error,s=c.data,d=Object(a.useState)([]),u=Object(O.a)(d,2),p=u[0],j=u[1];return Object(a.useEffect)((function(){r({readQuery:x})}),[r]),Object(a.useEffect)((function(){if(s){var e=s.map((function(e,t){return Object.keys(e).filter((function(e){return["lat","lng","percentCases"].includes(e)})).reduce((function(t,n){return"percentCases"===n?t.weight=Number(e[n].value):t[n]=Number(e[n].value),t}),{})}));j(e)}}),[s]),o?Object(l.jsx)("div",{children:"Loading..."}):i?Object(l.jsx)("div",{children:"Error getting data..."}):Object(l.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(l.jsx)(m.a,{bootstrapURLKeys:{key:null!==(e=f.googleApiKey)&&void 0!==e?e:"",libraries:["visualization"]},defaultCenter:{lat:39.8283,lng:-98.5795},defaultZoom:5,heatmap:{positions:p,options:{opacity:.6,radius:50}}})})},k=n(207),N=n(49),R=n(113),T=n(104),_=function(e){var t=e.rows,n=e.columns;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(R.a,{component:"h2",children:"COVID19 Counties With Most Cases"}),Object(l.jsx)("div",{style:{width:1010,height:600},children:Object(l.jsx)(T.a,{rows:t,columns:n})})]})},F=function(){var e=P(),t=Object(O.a)(e,2),n=t[0],r=t[1],c=r.loading,o=r.error,i=r.data,s=Object(a.useMemo)((function(){return[{field:"countyName",headerName:"County Name",width:250},{field:"percentCases",headerName:"Percent Cases",width:150},{field:"population",headerName:"Population",width:150},{field:"cases",headerName:"Cases",width:150},{field:"lat",headerName:"Latitude",width:150},{field:"lng",headerName:"Longitude",width:150}]}),[]),d=Object(a.useState)([]),u=Object(O.a)(d,2),p=u[0],j=u[1];return Object(a.useEffect)((function(){if(i){var e=i.map((function(e,t){var n=Object.keys(e).reduce((function(t,n){return t[n]=e[n].value,t}),{});return n.id=t.toString(),n}));j(e)}}),[i]),Object(a.useEffect)((function(){n({readQuery:x})}),[n]),c?Object(l.jsx)("div",{children:"Loading..."}):o?Object(l.jsx)("div",{children:"Error getting data..."}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(_,{rows:p,columns:s}),Object(l.jsx)(k.a,{component:N.b,to:"/heatmap",children:"Heatmap"})]})},L=(r=[{path:"/heatmap",exact:!0,childComponent:function(){return Object(l.jsx)(S,{})}},{path:["/","/home"],exact:!0,childComponent:function(){return Object(l.jsx)(p,{children:Object(l.jsx)(F,{})})}}],function(e){return r.map((function(t,n){var r=t.path,a=t.exact;return{ChildComponent:t.childComponent,computedPath:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduceRight(j)}(b,h)(e)(r),key:n.toString(),exact:a}}))}),I=function(){return Object(l.jsx)("div",{children:"Oops! 404."})},A=n(17),D=function(){return Object(l.jsxs)(A.c,{children:[L().map((function(e){var t=e.ChildComponent,n=e.computedPath,r=Object(d.a)(e,["ChildComponent","computedPath"]);return Object(l.jsx)(A.a,Object(s.a)(Object(s.a)({path:n},r),{},{children:Object(l.jsx)(t,{})}))})),Object(l.jsx)(A.a,{children:Object(l.jsx)(I,{})})]})},K=n(208),X=n(204),H=n(97),W=n(50),B=Object(H.a)(Object(W.a)({typography:{button:{textTransform:"unset"}}})),q=function(){return Object(l.jsx)("div",{children:"You are forbidden!"})},G=function(e){var t,n,r=e.children,a=Object(A.f)();return(null===a||void 0===a||null===(t=a.state)||void 0===t?void 0:t.notFound)?Object(l.jsx)(I,{}):(null===a||void 0===a||null===(n=a.state)||void 0===n?void 0:n.forbidden)?Object(l.jsx)(q,{}):Object(l.jsx)(l.Fragment,{children:r})},M=function(e){var t=e.children;return Object(l.jsx)(E,{dbName:"covid19nyt",username:"anonymous",password:"anonymous",endpoint:"https://express.stardog.cloud:5820",children:Object(l.jsx)(N.a,{children:Object(l.jsxs)(G,{children:[Object(l.jsx)(K.a,{}),Object(l.jsx)(X.a,{theme:B,children:t})]})})})};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(M,{children:Object(l.jsx)(D,{})})}),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.2745c5ae.chunk.js.map