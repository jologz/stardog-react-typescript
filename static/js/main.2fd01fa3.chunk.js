(this["webpackJsonpstardog-react-typescript"]=this["webpackJsonpstardog-react-typescript"]||[]).push([[0],{165:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),o=n(10),i=n.n(o),s=n(82),u=n(114),d=n(212),l=n(6),j=function(e){var t=e.children;return Object(l.jsx)(d.a,{maxWidth:"xl",children:Object(l.jsx)(l.Fragment,{children:t})})},p=function(e,t){return function(){return e(t.apply(void 0,arguments))}},b=function(e){return void 0===e?"":e},h=function(e){return function(t){return"string"===typeof t?e+t:t.map((function(t){return e+t}))}},O=n(8),f={googleApiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/stardog-react-typescript",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GOOGLE_API_KEY},m=n(115),g="PREFIX wd: <http://www.wikidata.org/entity/>\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\nPREFIX p: <http://www.wikidata.org/prop/>\nPREFIX ps: <http://www.wikidata.org/prop/statement/>\nPREFIX psv: <http://www.wikidata.org/prop/statement/value/>\nPREFIX wikibase: <http://wikiba.se/ontology#>\n\nSELECT ?countyName ?cases ?population ?percentCases ?lat ?lng\n{\n    # get the latest date\n    { SELECT (max(?d) as ?date) { ?r :date ?d } }\n\n    # get all the reports for the latest date\n    ?report\n        :cases ?cases  ;\n        :date ?date ;                \n        :county [\n            rdfs:label ?countyName ;\n            :fips ?fips\n        ]    \n\n    # Get coordinates of\n    SERVICE <https://query.wikidata.org/sparql> \n    {\n        SELECT * {\n            ?item wdt:P882 ?fips ;\n                  wdt:P1082 ?population ;\n                  p:P625 ?coordPoint .\n            ?coordPoint psv:P625 ?coord_node .\n            ?coord_node wikibase:geoLongitude ?lng ;\n                        wikibase:geoLatitude ?lat .\n        }\n    }   \n    # compute percentages\n    BIND(roundHalfToEven((?cases / ?population) * 100, 2) AS ?percentCases)\n}\nORDER BY desc(?percentCases)",v=n(40),x="CaseNumbersDataUpdate",w=function(e){return{type:x,caseNumbersData:e}},y=n(84),E=n.n(y),C=n(109),N=n(74),P=Object(a.createContext)({connection:{},dbName:""}),S=function(e){var t=e.username,n=e.password,r=e.endpoint,a=e.dbName,c=e.children,o=new N.Connection({username:t,password:n,endpoint:r});return Object(l.jsx)(P.Provider,{value:{connection:o,dbName:a},children:c})},_=function(){var e=Object(a.useContext)(P),t=e.connection,n=e.dbName,r=Object(a.useState)(!1),c=Object(O.a)(r,2),o=c[0],i=c[1],s=Object(a.useState)(),u=Object(O.a)(s,2),d=u[0],l=u[1],j=Object(a.useState)(null),p=Object(O.a)(j,2),b=p[0],h=p[1];return[Object(a.useCallback)(function(){var e=Object(C.a)(E.a.mark((function e(r){var a,c,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.readQuery,i(!0),e.next=4,N.query.execute(t,n,a);case 4:if((c=e.sent).ok){e.next=9;break}return l({status:c.status,statusText:c.statusText}),i(!1),e.abrupt("return");case 9:o=c.body.results.bindings,h(o),i(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,n]),{error:d,loading:o,data:b}]},k=function(){var e,t=Object(v.c)((function(e){return e})).caseNumbersData,n=Object(v.b)(),r=_(),c=Object(O.a)(r,2),o=c[0],i=c[1],s=i.loading,u=i.error,d=i.data,j=Object(a.useState)([]),p=Object(O.a)(j,2),b=p[0],h=p[1];return Object(a.useEffect)((function(){if(t.length){var e=t.map((function(e,t){return Object.keys(e).filter((function(e){return["lat","lng","percentCases"].includes(e)})).reduce((function(t,n){return"percentCases"===n?t.weight=Number(e[n].value):t[n]=Number(e[n].value),t}),{})}));h(e)}else o({readQuery:g})}),[o,t]),Object(a.useEffect)((function(){d&&n(w(d))}),[d,n]),s?Object(l.jsx)("div",{children:"Loading..."}):u?Object(l.jsx)("div",{children:"Error getting data..."}):Object(l.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(l.jsx)(m.a,{bootstrapURLKeys:{key:null!==(e=f.googleApiKey)&&void 0!==e?e:"",libraries:["visualization"]},defaultCenter:{lat:39.8283,lng:-98.5795},defaultZoom:5,heatmap:{positions:b,options:{opacity:.6,radius:50}}})})},R=n(218),T=n(52),D=n(120),L=n(110),F=function(e){var t=e.rows,n=e.columns;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(D.a,{component:"h2",children:"COVID19 Counties With Most Cases"}),Object(l.jsx)("div",{style:{width:1010,height:600},children:Object(l.jsx)(L.a,{rows:t,columns:n})})]})},I=function(){var e=Object(v.c)((function(e){return e})).caseNumbersData,t=Object(v.b)(),n=_(),r=Object(O.a)(n,2),c=r[0],o=r[1],i=o.loading,s=o.error,u=o.data,d=Object(a.useMemo)((function(){return[{field:"countyName",headerName:"County Name",width:250},{field:"percentCases",headerName:"Percent Cases",width:150},{field:"population",headerName:"Population",width:150},{field:"cases",headerName:"Cases",width:150},{field:"lat",headerName:"Latitude",width:150},{field:"lng",headerName:"Longitude",width:150}]}),[]),j=Object(a.useState)([]),p=Object(O.a)(j,2),b=p[0],h=p[1];return Object(a.useEffect)((function(){u&&t(w(u))}),[u,t]),Object(a.useEffect)((function(){if(e.length){var t=e.map((function(e,t){var n=Object.keys(e).reduce((function(t,n){return t[n]=e[n].value,t}),{});return n.id=t.toString(),n}));h(t)}else c({readQuery:g})}),[e,c]),i?Object(l.jsx)("div",{children:"Loading..."}):s?Object(l.jsx)("div",{children:"Error getting data..."}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(F,{rows:b,columns:d}),Object(l.jsx)(R.a,{component:T.b,to:"/heatmap",children:"Heatmap"})]})},A=(r=[{path:"/heatmap",exact:!0,childComponent:function(){return Object(l.jsx)(k,{})}},{path:["/","/home"],exact:!0,childComponent:function(){return Object(l.jsx)(j,{children:Object(l.jsx)(I,{})})}}],function(e){return r.map((function(t,n){var r=t.path,a=t.exact;return{ChildComponent:t.childComponent,computedPath:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduceRight(p)}(b,h)(e)(r),key:n.toString(),exact:a}}))}),X=function(){return Object(l.jsx)("div",{children:"Oops! 404."})},K=n(18),H=function(){return Object(l.jsxs)(K.c,{children:[A().map((function(e){var t=e.ChildComponent,n=e.computedPath,r=Object(u.a)(e,["ChildComponent","computedPath"]);return Object(l.jsx)(K.a,Object(s.a)(Object(s.a)({path:n},r),{},{children:Object(l.jsx)(t,{})}))})),Object(l.jsx)(K.a,{children:Object(l.jsx)(X,{})})]})},U=n(219),W=n(215),B=n(37),M=n(112),V=n.n(M),q=Object(B.c)({caseNumbersData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.caseNumbersData;default:return e}}}),G=[V()()],Q=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.d;return Object(B.e)(q,e,t(B.a.apply(void 0,G)))},Y=n(101),J=n(53),z=Object(Y.a)(Object(J.a)({typography:{button:{textTransform:"unset"}}})),Z=function(){return Object(l.jsx)("div",{children:"You are forbidden!"})},$=function(e){var t,n,r=e.children,a=Object(K.f)();return(null===a||void 0===a||null===(t=a.state)||void 0===t?void 0:t.notFound)?Object(l.jsx)(X,{}):(null===a||void 0===a||null===(n=a.state)||void 0===n?void 0:n.forbidden)?Object(l.jsx)(Z,{}):Object(l.jsx)(l.Fragment,{children:r})},ee=Q(),te=function(e){var t=e.children;return Object(l.jsx)(v.a,{store:ee,children:Object(l.jsx)(S,{dbName:"covid19nyt",username:"anonymous",password:"anonymous",endpoint:"https://express.stardog.cloud:5820",children:Object(l.jsx)(T.a,{children:Object(l.jsxs)($,{children:[Object(l.jsx)(U.a,{}),Object(l.jsx)(W.a,{theme:z,children:t})]})})})})};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(te,{children:Object(l.jsx)(H,{})})}),document.getElementById("root"))}},[[165,1,2]]]);
//# sourceMappingURL=main.2fd01fa3.chunk.js.map